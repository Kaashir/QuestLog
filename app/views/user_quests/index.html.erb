<div class="quest-page-container" style="background-image: url(<%= asset_path("forest_background.png") %>);">
  <p>Current class: <%= @current_user_class.first.class_type %></p>
  <p>To be moved somewhere else, just for testing!!! Total XP: <%= @current_user_class.first.xp %></p>

  <div class="quest-grid">
    <%
      positions = (1..12).to_a.shuffle
      quest_positions = {}

      @current_user_quests.each_with_index do |quest, index|
        quest_positions[positions[index]] = quest if index < 12
      end

      12.times do |i|
        position = i + 1
        row = ((position - 1) / 3) + 1
        col = ((position - 1) % 3) + 1
    %>
      <div class="quest-grid-cell" style="grid-row: <%= row %>; grid-column: <%= col %>;">
        <% if quest_positions[position] %>
          <div class="quest-card" data-bs-toggle="modal" data-bs-target="#modal-<%= quest_positions[position].id %>">
            <div class="quest-title">
              <h3><%= quest_positions[position].quest.title %></h3>
            </div>

            <div class="quest-progress">
              <p>
                <%= quest_positions[position].completed_frequency %>/<%= quest_positions[position].quest.frequency %>
              </p>
            </div>
          </div>
          <%= render "show_modal", user_quest: quest_positions[position] %>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class="add-quest-button-container">
    <div class="button-wrapper">
      <%= link_to "Add a quest", new_user_quest_path, class: "add-quest-button" %>
    </div>
  </div>
</div>
